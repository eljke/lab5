<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        td {
            width: 40px;
            height: 40px;
            border: 2px solid black;
            text-align: center;
            font-size: 30px;
            cursor: pointer;
        }
        table {
            margin: 10px;
            border-collapse: collapse;
        }
    </style>
</head>
<body>
<table id="cross-zero">
    <tr>
        <td onclick="move(0)"></td>
        <td onclick="move(1)"></td>
        <td onclick="move(2)"></td>
    </tr>
    <tr>
        <td onclick="move(3)"></td>
        <td onclick="move(4)"></td>
        <td onclick="move(5)"></td>
    </tr>
    <tr>
        <td onclick="move(6)"></td>
        <td onclick="move(7)"></td>
        <td onclick="move(8)"></td>
    </tr>
</table>
<button onclick="clr()">Clear the Board</button>
<script>

    /*
      Все возможные ходы для победы
     */
    const toWin = [
        [0, 1, 2],
        [3, 4, 5],
        [6, 7, 8],
        [0, 3, 6],
        [1, 4, 7],
        [2, 5, 8],
        [0, 4, 8],
        [2, 4, 6]
    ];

    let game_finished = false; // Флаг проверки на то, закончилась ли игра

    let cells = document.getElementById("cross-zero").getElementsByTagName('td');

        /*
         Возвращаем ячейки из html
        */
    function get(n) {
        return cells[n].innerHTML;
    }

     /*
      Проверяем, есть ли победитель на данном этапе
     */
    function check() {
        for (let s of toWin) {
            let c = get(s[0])
            if (c && c == get(s[1]) && c == get(s[2])) {
                return true;
            }
        }
        return false;
    }

    /*
     Возвращаем массив свободных ячеек
     */
    function free_cells() {
        let res = [];
        for (let cell of cells) {
            if (cell.innerHTML == "") res.push(cell);
        }
        return res;
    }

    /*
     Ход ai
    */
    function ai_turn(fc) {
        let ai_cell = Math.floor(Math.random()*fc.length); // Заполнение ai свободной ячейки
        fc[ai_cell].innerHTML = "X";
    }

    /*
     Ход игрока
    */
    function move(n) {
        if (game_finished) clr(); // Если вдруг игра уже завершена, очищаем доску

        if (get(n) == "") cells[n].innerHTML = "O"; // Проверка ячейки на "свободность" (если пусто - ставим O)
        else return;

        let fc = free_cells() // Получаем количество свободных ячеек

        /*
         Вывод в случае победы игрока или ничьи, ход ai в ином случае
        */
        if (check()) {
            game_finished = true;
            alert("Zeroes' win!")
            return;
        } else if (fc.length) {
            ai_turn(fc);
        } else {
            game_finished = true;
            alert("Draw!");
        }

        /*
         Вывод в случае победы ai
        */
        if (check()) {
            game_finished = true;
            alert("Crosses' victory");
        };
    }

    /*
      Очистка
     */
    function clr() {
        game_finished = false;
        for (let cell of cells) {
            cell.innerHTML = ""
        }
    }
</script>
</body>
</html>